<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS 面试题 | 前端</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.png">
    <meta name="description" content="欢迎来到江江的博客! 👋">
    
    <link rel="preload" href="/assets/css/0.styles.e1700646.css" as="style"><link rel="preload" href="/assets/js/app.8bc50557.js" as="script"><link rel="preload" href="/assets/js/2.9b5c8eec.js" as="script"><link rel="preload" href="/assets/js/14.8803238b.js" as="script"><link rel="prefetch" href="/assets/js/10.1531fba0.js"><link rel="prefetch" href="/assets/js/11.63741d13.js"><link rel="prefetch" href="/assets/js/12.1927f289.js"><link rel="prefetch" href="/assets/js/13.861f9870.js"><link rel="prefetch" href="/assets/js/15.d9dd1b59.js"><link rel="prefetch" href="/assets/js/16.e83e42c5.js"><link rel="prefetch" href="/assets/js/17.0f31bec1.js"><link rel="prefetch" href="/assets/js/18.3756dc93.js"><link rel="prefetch" href="/assets/js/19.604ef985.js"><link rel="prefetch" href="/assets/js/20.8f4a9075.js"><link rel="prefetch" href="/assets/js/21.97715305.js"><link rel="prefetch" href="/assets/js/22.3e8af041.js"><link rel="prefetch" href="/assets/js/23.6272a229.js"><link rel="prefetch" href="/assets/js/24.d0538901.js"><link rel="prefetch" href="/assets/js/3.60b75be9.js"><link rel="prefetch" href="/assets/js/4.259bde72.js"><link rel="prefetch" href="/assets/js/5.22499ca9.js"><link rel="prefetch" href="/assets/js/6.8ce66f47.js"><link rel="prefetch" href="/assets/js/7.d433d9e1.js"><link rel="prefetch" href="/assets/js/8.5d63017a.js"><link rel="prefetch" href="/assets/js/9.2c702dc6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e1700646.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">前端</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试题" class="dropdown-title"><span class="title">面试题</span> <span class="arrow down"></span></button> <button type="button" aria-label="面试题" class="mobile-dropdown-title"><span class="title">面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/01-算法题/" class="nav-link">
  算法题
</a></li><li class="dropdown-item"><!----> <a href="/interview/02-HTML面试题.html" class="nav-link">
  HTML 面试题
</a></li><li class="dropdown-item"><!----> <a href="/interview/03-CSS面试题.html" class="nav-link">
  CSS 面试题
</a></li><li class="dropdown-item"><!----> <a href="/interview/04-JS面试题.html" class="nav-link">
  JS 面试题
</a></li><li class="dropdown-item"><!----> <a href="/interview/05-Vue面试题.html" class="nav-link">
  Vue 面试题
</a></li><li class="dropdown-item"><!----> <a href="/interview/06-浏览器面试题.html" class="nav-link">
  浏览器 面试题
</a></li><li class="dropdown-item"><!----> <a href="/interview/07-网络面试题.html" class="nav-link">
  网络面试题
</a></li><li class="dropdown-item"><!----> <a href="/interview/08-HR面试题.html" class="nav-link">
  HR 面试题
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="HTML+CSS" class="dropdown-title"><span class="title">HTML+CSS</span> <span class="arrow down"></span></button> <button type="button" aria-label="HTML+CSS" class="mobile-dropdown-title"><span class="title">HTML+CSS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/html+css/01-HTML.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/html+css/02-CSS.html" class="nav-link">
  CSS
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript" class="mobile-dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/js/01-JS入门.html" class="nav-link">
  JS 入门
</a></li><li class="dropdown-item"><!----> <a href="/js/02-JS进阶.html" class="nav-link">
  JS 进阶
</a></li><li class="dropdown-item"><!----> <a href="/js/03-DOM.html" class="nav-link">
  DOM
</a></li><li class="dropdown-item"><!----> <a href="/js/04-BOM.html" class="nav-link">
  BOM
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/bahjan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试题" class="dropdown-title"><span class="title">面试题</span> <span class="arrow down"></span></button> <button type="button" aria-label="面试题" class="mobile-dropdown-title"><span class="title">面试题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/01-算法题/" class="nav-link">
  算法题
</a></li><li class="dropdown-item"><!----> <a href="/interview/02-HTML面试题.html" class="nav-link">
  HTML 面试题
</a></li><li class="dropdown-item"><!----> <a href="/interview/03-CSS面试题.html" class="nav-link">
  CSS 面试题
</a></li><li class="dropdown-item"><!----> <a href="/interview/04-JS面试题.html" class="nav-link">
  JS 面试题
</a></li><li class="dropdown-item"><!----> <a href="/interview/05-Vue面试题.html" class="nav-link">
  Vue 面试题
</a></li><li class="dropdown-item"><!----> <a href="/interview/06-浏览器面试题.html" class="nav-link">
  浏览器 面试题
</a></li><li class="dropdown-item"><!----> <a href="/interview/07-网络面试题.html" class="nav-link">
  网络面试题
</a></li><li class="dropdown-item"><!----> <a href="/interview/08-HR面试题.html" class="nav-link">
  HR 面试题
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="HTML+CSS" class="dropdown-title"><span class="title">HTML+CSS</span> <span class="arrow down"></span></button> <button type="button" aria-label="HTML+CSS" class="mobile-dropdown-title"><span class="title">HTML+CSS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/html+css/01-HTML.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/html+css/02-CSS.html" class="nav-link">
  CSS
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript" class="mobile-dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/js/01-JS入门.html" class="nav-link">
  JS 入门
</a></li><li class="dropdown-item"><!----> <a href="/js/02-JS进阶.html" class="nav-link">
  JS 进阶
</a></li><li class="dropdown-item"><!----> <a href="/js/03-DOM.html" class="nav-link">
  DOM
</a></li><li class="dropdown-item"><!----> <a href="/js/04-BOM.html" class="nav-link">
  BOM
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/bahjan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/interview/" aria-current="page" class="sidebar-link">目录</a></li><li><a href="/interview/01-算法题.html" class="sidebar-link">算法题</a></li><li><a href="/interview/02-HTML面试题.html" class="sidebar-link">HTML 面试题</a></li><li><a href="/interview/03-CSS面试题.html" class="sidebar-link">CSS 面试题</a></li><li><a href="/interview/04-JS面试题.html" class="active sidebar-link">JS 面试题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interview/04-JS面试题.html#一、js-的数据类型及区别" class="sidebar-link">一、JS 的数据类型及区别</a></li><li class="sidebar-sub-header"><a href="/interview/04-JS面试题.html#二、js-中数据类型检测方案" class="sidebar-link">二、JS 中数据类型检测方案</a></li><li class="sidebar-sub-header"><a href="/interview/04-JS面试题.html#三、数组和字符串的方法" class="sidebar-link">三、数组和字符串的方法</a></li><li class="sidebar-sub-header"><a href="/interview/04-JS面试题.html#四、js-的作用域、作用域链和预解析" class="sidebar-link">四、JS 的作用域、作用域链和预解析</a></li><li class="sidebar-sub-header"><a href="/interview/04-JS面试题.html#五、js-中改变-this-指向的方法" class="sidebar-link">五、JS 中改变 this 指向的方法</a></li><li class="sidebar-sub-header"><a href="/interview/04-JS面试题.html#六、构造函数原型、对象原型、原型链" class="sidebar-link">六、构造函数原型、对象原型、原型链</a></li><li class="sidebar-sub-header"><a href="/interview/04-JS面试题.html#七、new-运算符的实现机制" class="sidebar-link">七、new 运算符的实现机制</a></li><li class="sidebar-sub-header"><a href="/interview/04-JS面试题.html#八、深拷贝、浅拷贝" class="sidebar-link">八、深拷贝、浅拷贝</a></li><li class="sidebar-sub-header"><a href="/interview/04-JS面试题.html#九、防抖、节流" class="sidebar-link">九、防抖、节流</a></li><li class="sidebar-sub-header"><a href="/interview/04-JS面试题.html#十、闭包" class="sidebar-link">十、闭包</a></li><li class="sidebar-sub-header"><a href="/interview/04-JS面试题.html#十一、简述-mvvm" class="sidebar-link">十一、简述 MVVM</a></li><li class="sidebar-sub-header"><a href="/interview/04-JS面试题.html#十二、promise" class="sidebar-link">十二、Promise</a></li><li class="sidebar-sub-header"><a href="/interview/04-JS面试题.html#十三、es6-新特性-let、const" class="sidebar-link">十三、ES6 新特性，let、const</a></li><li class="sidebar-sub-header"><a href="/interview/04-JS面试题.html#十四、面向对象及其特点" class="sidebar-link">十四、面向对象及其特点</a></li><li class="sidebar-sub-header"><a href="/interview/04-JS面试题.html#十五、js-中常见的内存泄漏" class="sidebar-link">十五、Js 中常见的内存泄漏</a></li><li class="sidebar-sub-header"><a href="/interview/04-JS面试题.html#十六、js-的语言特性" class="sidebar-link">十六、JS 的语言特性</a></li><li class="sidebar-sub-header"><a href="/interview/04-JS面试题.html#十七、js-的垃圾回收机制" class="sidebar-link">十七、JS 的垃圾回收机制</a></li><li class="sidebar-sub-header"><a href="/interview/04-JS面试题.html#十八、js-的-4-种设计模式" class="sidebar-link">十八、JS 的 4 种设计模式</a></li><li class="sidebar-sub-header"><a href="/interview/04-JS面试题.html#十九、同源策略、跨域" class="sidebar-link">十九、同源策略、跨域</a></li><li class="sidebar-sub-header"><a href="/interview/04-JS面试题.html#二十、函数柯里化" class="sidebar-link">二十、函数柯里化</a></li><li class="sidebar-sub-header"><a href="/interview/04-JS面试题.html#二十一、事件循环-event-loop" class="sidebar-link">二十一、事件循环 (Event loop)</a></li><li class="sidebar-sub-header"><a href="/interview/04-JS面试题.html#二十二、回流和重绘" class="sidebar-link">二十二、回流和重绘</a></li><li class="sidebar-sub-header"><a href="/interview/04-JS面试题.html#二十三、事件流" class="sidebar-link">二十三、事件流</a></li><li class="sidebar-sub-header"><a href="/interview/04-JS面试题.html#二十四、事件委托、事件源" class="sidebar-link">二十四、事件委托、事件源</a></li><li class="sidebar-sub-header"><a href="/interview/04-JS面试题.html#二十五、事件冒泡" class="sidebar-link">二十五、事件冒泡</a></li><li class="sidebar-sub-header"><a href="/interview/04-JS面试题.html#二十六、cookie、sessionstorage、localstorage-的区别" class="sidebar-link">二十六、Cookie、sessionStorage、localStorage 的区别</a></li></ul></li><li><a href="/interview/05-Vue面试题.html" class="sidebar-link">Vue 面试题</a></li><li><a href="/interview/06-浏览器面试题.html" class="sidebar-link">浏览器面试题</a></li><li><a href="/interview/07-网络面试题.html" class="sidebar-link">网络面试题</a></li><li><a href="/interview/08-HR面试题.html" class="sidebar-link">HR 面试题</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="js-面试题"><a href="#js-面试题" class="header-anchor">#</a> JS 面试题</h1> <h2 id="一、js-的数据类型及区别"><a href="#一、js-的数据类型及区别" class="header-anchor">#</a> 一、JS 的数据类型及区别</h2> <h3 id="_1-数据类型分为两大类"><a href="#_1-数据类型分为两大类" class="header-anchor">#</a> 1. 数据类型分为两大类：</h3> <p>值类型（简单/基本对象类型）和 引用类型（复杂/复杂对象类型）</p> <ul><li><p>基本类型：在内存中占据<strong>固定大小</strong>，保存在<strong>栈</strong>内存中。</p> <ul><li>Number（数字）</li> <li>String（字符串）</li> <li>Boolean（布尔）</li> <li>undefined（未定义）</li> <li>null（空）</li> <li>Symbol（符号）（ES6 新增的）</li></ul></li> <li><p>引用类型：引用类型的<strong>值是对象</strong>，保存在<strong>堆</strong>内存中，栈内存存储的是对象的变量标识符以及对象在堆内存中的存储地址。</p> <ul><li>Object（对象） 包括：数组、函数</li> <li>Function（函数）</li> <li>Array（数组）</li> <li>Date（日期）</li> <li>RegExp（正则表达式）</li> <li>特殊的基本包装类型（String、Number、Boolean）</li> <li>单体内置对象（Global、Math）...</li></ul></li></ul> <h3 id="_2-区别"><a href="#_2-区别" class="header-anchor">#</a> 2. 区别：</h3> <table><thead><tr><th></th> <th>基本类型</th> <th>引用类型</th></tr></thead> <tbody><tr><td>存储位置</td> <td>存放在<strong>栈中</strong>，它们的值直接存储在变量访问的位置</td> <td>存放在<strong>堆中</strong>，存储在变量处的值是一个指针（point），指向存储对象的内存地址</td></tr> <tr><td>复制变量</td> <td>会将原始值的副本赋值给新变量，<strong>此后这两个变量是完全独立的，他们只是拥有相同的 value 而已</strong></td> <td>会把这个内存地址赋值给新变量，也就是说这两个变量都指向了堆内存中的同一个对象，他们中任何一个作出的改变都会反映在另一个身上，只是<strong>多了一个指针</strong></td></tr></tbody></table> <p>基本类型例题：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span>
b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 10值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 20值</span>
</code></pre></div><p>引用类型例题：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj2 <span class="token operator">=</span> obj1<span class="token punctuation">;</span>
obj2<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;我有名字了&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 我有名字了</span>

<span class="token comment">// 说明这两个引用数据类型指向了同一个堆内存对象。obj1 赋值给 obj2，实际上这个堆内存对象在栈内存的引用地址复制了一份给了 obj2，</span>
<span class="token comment">// 但是实际上他们共同指向了同一个堆内存对象，所以修改 obj2 其实就是修改那个对象，所以通过 obj1 访问也能访问的到。</span>
</code></pre></div><h2 id="二、js-中数据类型检测方案"><a href="#二、js-中数据类型检测方案" class="header-anchor">#</a> 二、JS 中数据类型检测方案</h2> <h3 id="_1-typeof"><a href="#_1-typeof" class="header-anchor">#</a> 1. typeof:</h3> <ul><li><p>优点：能够快速区分基本数据类型</p></li> <li><p>缺点：不能将Object、Array和Null区分，都返回object</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// number</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// boolean</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token string">'hi'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// string</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> Symbol<span class="token punctuation">)</span>           <span class="token comment">// function</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// function</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// function</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// object </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// object</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// object</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// undefined</span>
</code></pre></div><h3 id="_2-instanceof"><a href="#_2-instanceof" class="header-anchor">#</a> 2. instanceof:</h3> <ul><li><p>优点：能够区分Array、Object和Function，适合用于判断自定义的类实例对象</p></li> <li><p>缺点：Number，Boolean，String基本数据类型不能判断</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token keyword">instanceof</span> <span class="token class-name">Number</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token boolean">true</span> <span class="token keyword">instanceof</span> <span class="token class-name">Boolean</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// false </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'str'</span> <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// false  </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment">// true</span>
</code></pre></div><h3 id="_3-object-prototype-tostring-call"><a href="#_3-object-prototype-tostring-call" class="header-anchor">#</a> 3. Object.prototype.toString.call()：</h3> <ul><li><p>优点：精准判断数据类型</p></li> <li><p>缺点：写法繁琐不容易记，推荐进行封装后使用</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> toString <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                      <span class="token comment">//[object Number]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment">//[object Boolean]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'hi'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment">//[object String]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token comment">//[object Array]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token comment">//[object Object]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">//[object Function]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">//[object Undefined]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment">//[object Null]</span>
</code></pre></div><h2 id="三、数组和字符串的方法"><a href="#三、数组和字符串的方法" class="header-anchor">#</a> 三、数组和字符串的方法</h2> <h3 id="_1-数组的方法"><a href="#_1-数组的方法" class="header-anchor">#</a> 1. 数组的方法：</h3> <table><thead><tr><th>方法名</th> <th>作用</th> <th>返回值</th> <th>是否改变原数组</th></tr></thead> <tbody><tr><td>arr.push()</td> <td>从后面添加元素</td> <td>添加之后的新数组的长度</td> <td>是</td></tr> <tr><td>arr.unshift()</td> <td>从前面添加元素</td> <td>添加之后的新数组的长度</td> <td>是</td></tr> <tr><td>arr.shift()</td> <td>从前面删除元素，只能删一个</td> <td>删除的元素</td> <td>是</td></tr> <tr><td>arr.pop()</td> <td>从后面删除元素，只能删一个</td> <td>删除的元素</td> <td>是</td></tr> <tr><td>arr.splice(i,n)</td> <td>删除从 i (索引值)开始的 n 个元素</td> <td>删除的元素</td> <td>是</td></tr> <tr><td>arr.sort()</td> <td>将数组进行排序</td> <td>排序的数组（默认是按照最左边的数字进行排序，不是按照数字大小排序的）</td> <td>是</td></tr> <tr><td>arr.forEach(callback)</td> <td>遍历数组</td> <td>不管有无 return，都不会返回任何值</td> <td>是</td></tr> <tr><td>arr.reverse()</td> <td>将数组反转</td> <td>反转后的新数组</td> <td>是</td></tr> <tr><td>arr.concat()</td> <td>连接两个数组</td> <td>连接后的新数组</td> <td>否*</td></tr> <tr><td>arr.join()</td> <td>将一个数组的所有元素拼接成一个字符串</td> <td>返回拼接的字符串</td> <td>否*</td></tr> <tr><td>arr.slice(start,end)</td> <td>切去索引值 start 到索引值 end 的数组，不包含 end 索引的值</td> <td>切出来的新数组</td> <td>否*</td></tr> <tr><td>arr.map(callback)</td> <td>映射数组(遍历数组)，用一个参数接收</td> <td>有 return 返回一个新数组</td> <td>否*</td></tr> <tr><td>arr.filter(callback)</td> <td>过滤（筛选）数组，用一个参数接收</td> <td>返回一个满足要求的数组</td> <td>否*</td></tr></tbody></table> <h3 id="_2-字符串的方法"><a href="#_2-字符串的方法" class="header-anchor">#</a> 2. 字符串的方法：</h3> <table><thead><tr><th>方法名</th> <th>作用</th> <th>返回值</th> <th>是否改变原字符串</th></tr></thead> <tbody><tr><td>str.charAt()</td> <td>获取指定位置(索引 i )处的字符</td> <td>如超出有效范围的索引值，返回空字符串</td> <td>否</td></tr> <tr><td>str.concat()</td> <td>拼接两个字符串(可以有多个参数)</td> <td>拼接后的新字符串</td> <td>否</td></tr> <tr><td>str.slice(start,end)</td> <td>切去索引值 start 到索引值 end 的字符串，不包含 end 索引的值，[ start , end )</td> <td>切出来的新字符串</td> <td>否</td></tr> <tr><td>str.indexOf()</td> <td>返回指定内容在原字符串中的位置</td> <td>如未找到子字符串，返回-1</td> <td>否</td></tr> <tr><td>str.lastIndexOf()</td> <td>从后往前找，只找第一个匹配的</td> <td>返回指定值最后一次出现的索引，如未找到子字符串，返回-1</td> <td>否</td></tr> <tr><td>str.trim()</td> <td>只能去除字符串前后的空白</td> <td>去掉空白的新字符串</td> <td>否</td></tr> <tr><td>str.split()</td> <td>将字符串转化为数组</td> <td>转化后的数组</td> <td>否</td></tr> <tr><td>str.toUpperCase()</td> <td>转换大写</td> <td>转换为大写的新字符串</td> <td>否</td></tr> <tr><td>str.toLowerCase()</td> <td>转换小写</td> <td>转换为小写的新字符串</td> <td>否</td></tr> <tr><td>str.replace()</td> <td>替换字符串，参数(把什么，改成什么)</td> <td>替代的新字符串</td> <td>否</td></tr></tbody></table> <h2 id="四、js-的作用域、作用域链和预解析"><a href="#四、js-的作用域、作用域链和预解析" class="header-anchor">#</a> 四、JS 的作用域、作用域链和预解析</h2> <h3 id="_1-作用域"><a href="#_1-作用域" class="header-anchor">#</a> 1. 作用域：</h3> <p>js 的作用域：就是代码名字（变量）在某个范围内起作用和效果。<br>
目的：为了提高程序的可靠性，更重要的是减少命名冲突。</p> <ul><li><p>全局作用域： 整个script标签 或者是个单独的js文件。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>局部作用域（函数作用域）：在函数内就是局部作用域 这个代码的名字只在函数内部起效果和作用。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 局部作用域</span>
    <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h3 id="_2-作用域链"><a href="#_2-作用域链" class="header-anchor">#</a> 2. 作用域链：</h3> <p>内部函数访问外部函数，采取链式查找的方式来决定取哪个值的结构。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>              <span class="token comment">// 外部函数</span>
    <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>         <span class="token comment">// 内部函数</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 输出 20</span>
    <span class="token punctuation">}</span>
    <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_3-预解析"><a href="#_3-预解析" class="header-anchor">#</a> 3. 预解析：</h3> <p>（1）js 引擎运行 js 分两步：预解析 和 代码执行。<br>
① 预解析：js 引擎会把 js 里面所有的 var 还有 function 提升到当前作用域的最前面。<br>
② 代码执行：按照代码书写的顺序从上往下执行。</p> <p>（2）预解析分为 变量预解析（变量提升） 和 函数预解析（函数提升）。<br>
① 变量提升：把所有的变量声明提升到当前作用域的最前面 不提升赋值操作。<br>
② 函数提升：把所有的函数声明提升到当前作用域的最前面 不调用函数。</p> <div class="language- extra-class"><pre><code>```js
console.log(sum);     // 报错
```
</code></pre></div><h2 id="五、js-中改变-this-指向的方法"><a href="#五、js-中改变-this-指向的方法" class="header-anchor">#</a> 五、JS 中改变 this 指向的方法</h2> <h3 id="_1-函数内-this-指向"><a href="#_1-函数内-this-指向" class="header-anchor">#</a> 1. 函数内 this 指向</h3> <ul><li>普通函数调用 : window (node 环境指向：global)</li> <li>立即执行函数 : window (node 环境指向：global)</li> <li>定时器函数  : window (node 环境指向：Timeout 对象)</li> <li>事件绑定方法 : 绑定事件对象</li> <li>对象方法调用 : 该方法所属对象</li> <li>构造函数调用 : 实例对象 （原型对象里面的方法也指向实例对象）</li></ul> <h3 id="_2-改变-this-指向的-call-方法"><a href="#_2-改变-this-指向的-call-方法" class="header-anchor">#</a> 2. 改变 this 指向的 call 方法</h3> <p>（1）call() 方法调用一个对象，可以改变 this 指向。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">,</span>……<span class="token punctuation">)</span>

<span class="token comment">// thisArg: 当前调用函数 this 的指向对象</span>
<span class="token comment">// arg1, arg2: 传递的其他参数</span>
</code></pre></div><p>（2）实现一个 call 函数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myCall</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> context <span class="token operator">=</span> context <span class="token operator">||</span> window
  <span class="token comment">// 给 context 添加一个属性</span>
  <span class="token comment">// getValue.call(a, 'yck', '24') =&gt; a.fn = getValue</span>
  context<span class="token punctuation">.</span>fn <span class="token operator">=</span> <span class="token keyword">this</span>
  <span class="token comment">// 将 context 后面的参数取出来</span>
  <span class="token keyword">var</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token comment">// getValue.call(a, 'yck', '24') =&gt; a.fn('yck', '24')</span>
  <span class="token keyword">var</span> result <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>
  <span class="token comment">// 删除 fn</span>
  <span class="token keyword">delete</span> context<span class="token punctuation">.</span>fn
  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-改变-this-指向的-apply-方法"><a href="#_3-改变-this-指向的-apply-方法" class="header-anchor">#</a> 3. 改变 this 指向的 apply 方法</h3> <p>（1）apply() 方法调用一个函数，可以改变 this 指向。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">fun</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> <span class="token punctuation">[</span>argsArray<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// thisArg: 在 fun 函数运行时指定的 this 值</span>
<span class="token comment">// argsArray: 传递的值，必须包含在数组里</span>
<span class="token comment">// 返回值就是函数的返回值，因为它就是调用函数</span>
</code></pre></div><p>（2）实现一个 apply 函数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myApply</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> context <span class="token operator">=</span> context <span class="token operator">||</span> window
  context<span class="token punctuation">.</span>fn <span class="token operator">=</span> <span class="token keyword">this</span>

  <span class="token keyword">var</span> result
  <span class="token comment">// 需要判断是否存储第二个参数</span>
  <span class="token comment">// 如果存在，就将第二个参数展开</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">delete</span> context<span class="token punctuation">.</span>fn
  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4-改变-this-指向的-bind-方法"><a href="#_4-改变-this-指向的-bind-方法" class="header-anchor">#</a> 4. 改变 this 指向的 bind 方法</h3> <p>（1）bind() 方法不会调用函数，但能改变 this 指向。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">,</span>……<span class="token punctuation">)</span>

<span class="token comment">// thisArg: 在 fun 函数运行时指定的 this 值</span>
<span class="token comment">// arg1, arg2: 传递的其他参数</span>
<span class="token comment">// 返回由指定的 this 值和初始化参数改造的原函数拷贝</span>
</code></pre></div><p>（2）实现一个 bind 函数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myBind</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span> <span class="token operator">!==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'Error'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token keyword">this</span>
  <span class="token keyword">var</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token comment">// 返回一个函数</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 因为返回了一个函数，我们可以 new F()，所以需要判断</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">F</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">_this</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">,</span> <span class="token operator">...</span>arguments<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token function">_this</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_5-相同点、不同点及应用场景"><a href="#_5-相同点、不同点及应用场景" class="header-anchor">#</a> 5. 相同点、不同点及应用场景</h3> <p>（1）相同点：都可以改变函数内部的 this 指向。</p> <p>（2）不同点：</p> <ul><li>call 和 apply 会调用函数，并且改变函数内部 this 指向。</li> <li>call 和 apply 传递的参数不一样，call 传递参数 aru1,aru2...形式，而 apply 必须数组形式[arg]。</li> <li>bind 不会调用函数，但可以改变函数内部 this 指向。</li></ul> <p>（3）主要应用场景：</p> <ul><li>call 经常做继承。</li> <li>apply 经常跟数组有关系，比如借助于数学对象实现数组最大值、最小值。</li> <li>bind 不调用函数，但还想改变 this 指向时使用，比如改变定时器内部的 this 指向。</li></ul> <h2 id="六、构造函数原型、对象原型、原型链"><a href="#六、构造函数原型、对象原型、原型链" class="header-anchor">#</a> 六、构造函数原型、对象原型、原型链</h2> <h3 id="_1-构造函数原型-prototype"><a href="#_1-构造函数原型-prototype" class="header-anchor">#</a> 1. 构造函数原型（prototype）：</h3> <p>每一个构造函数都有一个 prototype 属性，指向另一个对象。</p> <h3 id="_2-对象原型-proto"><a href="#_2-对象原型-proto" class="header-anchor">#</a> 2. 对象原型（<strong>proto</strong>）：</h3> <p>对象都会有一个属性__proto__指向构造函数的 prototype 原型对象。</p> <h3 id="_3-原型链"><a href="#_3-原型链" class="header-anchor">#</a> 3. 原型链：</h3> <p>通过构造函数创建实例对象，构造函数指向——&gt;这个实例对象，实例对象里面有一个原型__proto__ 指向——&gt;原型对象(prototype)，实例对象里面有一个 constructor 可以指回——&gt;构造函数 【实例对象里的 constructor 其实是通过原型对象(prototype) 来指回——&gt;构造函数的】。</p> <p>原型对象(Star.prototype)里面的__proto__指向——&gt; Object.prototype, Object.prototype 里面的__proto__指向——&gt;null（表示原型链的顶端）。
<img src="%E5%8E%9F%E5%9E%8B%E9%93%BE.png" alt="原型链"></p> <h3 id="_4-普通函数和构造函数的区别"><a href="#_4-普通函数和构造函数的区别" class="header-anchor">#</a> 4. 普通函数和构造函数的区别</h3> <ol><li>写法：构造函数也是一个普通函数，构造函数首字母大写。构造函数的函数名与类名相同</li> <li>调用方式：普通函数-&gt;直接调用，构造函数-&gt;用 new 关键字来调用</li> <li>创建对象：普通函数-&gt;不会创建新对象，构造函数-&gt;调用时，内部会创建一个新的实例对象</li> <li>this 指向：普通函数-&gt;this 指向调用函数的对象(没调用默认 window)，构造函数-&gt;this 指向实例对象</li> <li>返回值：普通函数-&gt;由 return 语句来决定，构造函数-&gt;默认是创建的实例对象</li></ol> <h2 id="七、new-运算符的实现机制"><a href="#七、new-运算符的实现机制" class="header-anchor">#</a> 七、new 运算符的实现机制</h2> <ul><li>在内存中创建一个新的空对象。</li> <li>设置原型，将对象的原型设置为函数的 prototype 对象。</li> <li>让 this 指向这个新对象，执行构造函数里面的代码（给这个新对象添加属性和方法）。</li> <li>判断函数的返回值类型，如：值类型，返回创建的对象，如：引用类型，就返回这个引用类型的对象。</li></ul> <ol><li>利用构造函数创建对象</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">=</span> uname<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sing</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我会唱歌'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'刘德华'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token comment">// {uname:'刘德华',age: 18, sing : function() { console.log('我会唱歌');}}</span>
<span class="token keyword">var</span> zxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'张学友'</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ldh<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>利用 new Object() 创建对象</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>利用对象字面量创建对象</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="八、深拷贝、浅拷贝"><a href="#八、深拷贝、浅拷贝" class="header-anchor">#</a> 八、深拷贝、浅拷贝</h2> <h3 id="_1-深拷贝"><a href="#_1-深拷贝" class="header-anchor">#</a> 1. 深拷贝</h3> <p>深拷贝: 拷贝多层，每一级别的数据都会拷贝。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'andy'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'pink'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 封装函数</span>
<span class="token keyword">function</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span><span class="token parameter">newobj<span class="token punctuation">,</span> oldobj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> k <span class="token keyword">in</span> oldobj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 判断属性值属于哪种数据类型</span>
        <span class="token comment">// 1. 获取属性值  oldobj[k]</span>
        <span class="token keyword">var</span> item <span class="token operator">=</span> oldobj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">// 2. 判断这个值是否是数组</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            newobj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token function">deepCopy</span><span class="token punctuation">(</span>newobj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span>
        <span class="token comment">// 3. 判断这个值是否是对象</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            newobj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token function">deepCopy</span><span class="token punctuation">(</span>newobj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span>
        <span class="token comment">// 4. 是否属于简单数据类型</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            newobj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> item<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">deepCopy</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
o<span class="token punctuation">.</span>msg<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-浅拷贝"><a href="#_2-浅拷贝" class="header-anchor">#</a> 2. 浅拷贝</h3> <p>浅拷贝: 只是拷贝一层，更深层次对象级别的只拷贝引用。</p> <p>ES6 新增方法:</p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token operator">...</span>sources<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>target: 拷贝给谁</li> <li>sources: 拷贝的是谁</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'andy'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
o<span class="token punctuation">.</span>msg<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="九、防抖、节流"><a href="#九、防抖、节流" class="header-anchor">#</a> 九、防抖、节流</h2> <h3 id="_1-防抖-debounce"><a href="#_1-防抖-debounce" class="header-anchor">#</a> 1. 防抖(debounce)</h3> <p><strong>在一定时间内，只执行最后一次任务。</strong></p> <p>在事件被触发的 N 秒后再执行任务（回调函数），如果在这 N 秒内又触发事件，则重新计时：</p> <ul><li>当事件触发时，相应的响应处理函数不会立即被触发，而是等待一定的时间；</li> <li>当事件密集触发时，函数的触发会被频繁的推迟；</li> <li>只有等待了一段时间也没有事件触发，才会真正执行响应处理函数。</li></ul> <p><strong>防抖的应用场景：</strong></p> <ul><li>手机号、邮箱输入检测</li> <li>搜索框搜索输入（只需最后一次输入完后，再发送 Ajax 请求，减少请求次数，节约请求资源）</li> <li>窗口大小 resize（只需窗口调整完成后，计算窗口大小，防止重复渲染）</li> <li>滚动事件 scroll（只需执行触发的最后一次滚动事件的处理程序）</li> <li>文本输入的验证（连续输入文字后发送 Ajax 请求进行验证，（停止输入后）验证一次就好</li></ul> <p>极简版：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">debounce</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> wait</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> time
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span> <span class="token function">cleartTimeout</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span>
        time <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span> wait<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>带参数版本：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span>wait</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> time
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token comment">// 如果定时器存在，需要清除定时器，重新定义</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span>
        time <span class="token operator">=</span> <span class="token function">setTimeou</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">{</span>
            <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>arguments<span class="token punctuation">)</span>
            time <span class="token operator">=</span> <span class="token keyword">null</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>wait<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-节流-throttle"><a href="#_2-节流-throttle" class="header-anchor">#</a> 2. 节流(throttle)</h3> <p><strong>在一定时间内，同一个任务只会执行一次。</strong></p> <p>在一定时间内，只能触发一次响应函数，如果事件频繁触发，只有一次生效。</p> <p><strong>节流的应用场景：</strong></p> <ul><li>DOM 元素的拖拽功能实现（mousemove）</li> <li>射击游戏的 mousedown/keydown 事件（单位时间只能发射一颗子弹）</li> <li>计算鼠标移动的距离（mousemove）</li> <li>搜索联想（keyup）</li> <li>滚动事件 scroll，（只要页面滚动就会间隔一段时间判断一次）</li></ul> <p>极简版本：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">throttle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span>wait</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> time
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>time<span class="token punctuation">)</span> time <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span>wait<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>带参数版本：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span>wait</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> time
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>time<span class="token punctuation">)</span><span class="token punctuation">{</span>
           time <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
               <span class="token function">clearTimeout</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span>
               <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>arguments<span class="token punctuation">)</span>
           <span class="token punctuation">}</span><span class="token punctuation">)</span> 
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-防抖和节流的区别"><a href="#_3-防抖和节流的区别" class="header-anchor">#</a> 3. 防抖和节流的区别</h3> <ul><li><p>防抖：某一段时间只执行一次（如果事件被频繁触发，防抖能保证只有最后一次触发生效！前面 n 多次的触发都会被忽略）。</p></li> <li><p>节流：间隔时间执行（如果事件被频繁触发，节流能够减少事件触发的频率，因此节流是有选择地执行一部分事件）。</p></li></ul> <h2 id="十、闭包"><a href="#十、闭包" class="header-anchor">#</a> 十、闭包</h2> <h3 id="_1-闭包-closure"><a href="#_1-闭包-closure" class="header-anchor">#</a> 1.闭包(closure):</h3> <p>指有权访问另一个函数作用域中变量的函数。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-闭包的特点"><a href="#_2-闭包的特点" class="header-anchor">#</a> 2.闭包的特点：</h3> <ul><li>函数嵌套函数。</li> <li>函数内部可以引用外部的参数和变量。</li> <li>参数和变量不会被垃圾回收机制回收。</li></ul> <h3 id="_3-闭包的优点"><a href="#_3-闭包的优点" class="header-anchor">#</a> 3.闭包的优点：</h3> <ul><li>变量长期驻扎在内存中</li> <li>避免全局变量的污染</li> <li>私有成员的存在</li></ul> <h3 id="_4-闭包的缺点"><a href="#_4-闭包的缺点" class="header-anchor">#</a> 4.闭包的缺点：</h3> <p>函数的变量一直保存在内存中，过多的闭包可能会导致内存泄漏。</p> <h3 id="_5-闭包的使用场景"><a href="#_5-闭包的使用场景" class="header-anchor">#</a> 5.闭包的使用场景：</h3> <ul><li>1.setTimeout：<br>
原生的setTimeout传递的第一个函数不能带参数，通过闭包可以实现传参效果；</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> f2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> fun <span class="token operator">=</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span>fun<span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//一秒之后打印出1</span>
</code></pre></div><ul><li><p>2.回调：<br>
定义行为，然后把它关联到某个用户事件上（点击或者按键）。代码通常会作为一个回调（事件触发时调用的函数）绑定到事件。</p></li> <li><p>3.防抖函数：<br>
在事件被触发n秒后再执行回调，如果在这n秒内又被触发，则重新计时。</p></li> <li><p>4.封装私有变量：<br>
用js创建一个计数器：</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
       <span class="token function-variable function">inc</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           sum<span class="token operator">++</span><span class="token punctuation">;</span>
           <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">inc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">inc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//2</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">inc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//3</span>
</code></pre></div><h2 id="十一、简述-mvvm"><a href="#十一、简述-mvvm" class="header-anchor">#</a> 十一、简述 MVVM</h2> <h3 id="_1-mvvm-的概念"><a href="#_1-mvvm-的概念" class="header-anchor">#</a> 1. MVVM 的概念</h3> <p>视图模型双向绑定，是 Model-View-ViewModel 的缩写，也就是把 MVC 中的 Controller 演变成 ViewModel。<br>
Model 层：代表数据模型。<br>
View 层：代表 UI 组件。<br>
ViewModel 层：是 View 和 Model 层的桥梁，数据会绑定到 ViewModel 层并自动将数据渲染到页面中，
视图（View）变化时会通知 ViewModel 更新数据。</p> <p>以前是操作 DOM 结构更新视图，现在是数据驱动视图。</p> <h3 id="_2-mvvm-的优点"><a href="#_2-mvvm-的优点" class="header-anchor">#</a> 2. MVVM 的优点</h3> <ul><li>低耦合：视图（View）可以独立于 Model 变化和修改，一个 Model 可以绑定到不同的 View 上，
当 View 变化时 Model 可以不变，当 Model 变化时 View 也可以不变；</li> <li>可重用性：你可以把一些视图逻辑放在一个 Model 里面，让很多 View 重用这段视图逻辑。</li> <li>独立开发：开发人员可以专注于业务逻辑和数据的开发(ViewModel)，设计人员可以专注于页面设计。</li> <li>可测试。</li></ul> <h2 id="十二、promise"><a href="#十二、promise" class="header-anchor">#</a> 十二、Promise</h2> <h3 id="_1-promise"><a href="#_1-promise" class="header-anchor">#</a> 1.Promise</h3> <p>Promise 是解决回调地狱的构造函数。</p> <p>例题：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
<span class="token comment">//  结果： 1 2 4 3 </span>
<span class="token comment">// promise 构造函数是同步执行的，then 方法是异步执行的</span>
<span class="token comment">// Promise new 的时候会立即执行里面的代码 </span>
<span class="token comment">// then是微任务 会在本次任务执行完的时候执行，setTimeout是宏任务 会在下次任务执行的时候执行</span>
</code></pre></div><h3 id="_2-promise-的三种状态"><a href="#_2-promise-的三种状态" class="header-anchor">#</a> 2.promise 的三种状态：</h3> <ul><li>pending： 初始状态也叫等待状态</li> <li>resolved/fulfiled： 成功状态</li> <li>rejected： 失败状态</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> num <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>num <span class="token operator">&gt;</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;大&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;小&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>状态一旦改变，就不会再变。创造 promise 实例后，它会立即执行。</p> <h3 id="_3-promise-的特点"><a href="#_3-promise-的特点" class="header-anchor">#</a> 3.Promise 的特点：</h3> <ul><li>Promise 对象的状态不受外界影响</li> <li>Promise 的状态一旦改变，就不会再变，任何时候都可以得到这个结果，状态不可以逆，</li></ul> <h3 id="_4-promise-的缺点"><a href="#_4-promise-的缺点" class="header-anchor">#</a> 4.Promise 的缺点：</h3> <ul><li>一旦新建它就会立即执行，无法中途取消</li> <li>如果不设置回调函数，内部抛出的错误，不会反映到外部</li> <li>当处于 pending（等待）状态时，无法得知目前的进展</li></ul> <h3 id="_5-promise-解决的问题"><a href="#_5-promise-解决的问题" class="header-anchor">#</a> 5.Promise 解决的问题</h3> <ul><li>回调地狱，代码难以维护，常常第一个的函数的输出是第二个函数的输入这种现象</li> <li>promise 可以支持多并发的请求，获取并发请求中的数据</li></ul> <p>这个 promise 可以解决异步的问题，本身不能说 promise 是异步的。</p> <h3 id="_6-async-await、promise、settimeout-的区别"><a href="#_6-async-await、promise、settimeout-的区别" class="header-anchor">#</a> 6.async await、Promise、setTimeout 的区别</h3> <ul><li>setTimeout：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script start'</span><span class="token punctuation">)</span>     <span class="token comment">// 1. 打印 script start</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'settimeout'</span><span class="token punctuation">)</span>   <span class="token comment">// 4. 打印 settimeout</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>                              <span class="token comment">// 2. 调用 setTimeout 函数，并定义其完成后执行的回调函数</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script end'</span><span class="token punctuation">)</span>       <span class="token comment">// 3. 打印 script end</span>

<span class="token comment">// 输出顺序：script start -&gt; script end -&gt; settimeout</span>
</code></pre></div><ul><li>Promise：</li></ul> <p>Promise本身是同步的立即执行函数， 当在 executor 中执行 resolve 或者 reject 的时候，此时是异步操作，会先执行 then/catch 等，当主栈完成后，才会去调用 resolve/reject 中存放的方法执行，打印 p 的时候，是打印的返回结果，一个 Promise 实例。</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script start'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> promise1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise1'</span><span class="token punctuation">)</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise1 end'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'settimeout'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script end'</span><span class="token punctuation">)</span>
<span class="token comment">// 输出顺序: script start-&gt;promise1-&gt;promise1 end-&gt;script end-&gt;promise2-&gt;settimeout</span>
</code></pre></div><ul><li>async await：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 start'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 end'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script start'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script end'</span><span class="token punctuation">)</span>

<span class="token comment">// 输出顺序：script start-&gt;async1 start-&gt;async2-&gt;script end-&gt;async1 end</span>
</code></pre></div><p>async 函数返回一个 Promise 对象，当函数执行的时候，一旦遇到 await 就会先返回，等到触发的异步操作完成，再执行函数体内后面的语句。可以理解为，是让出了线程，跳出了 async 函数体。</p> <h2 id="十三、es6-新特性-let、const"><a href="#十三、es6-新特性-let、const" class="header-anchor">#</a> 十三、ES6 新特性，let、const</h2> <h3 id="_1-es6-新特性"><a href="#_1-es6-新特性" class="header-anchor">#</a> 1. ES6 新特性</h3> <p>const 和 let、模板字符串、箭头函数、函数的参数默认值、对象和数组解构、<br>
for...of 和 for...in、ES6 中的类。</p> <h3 id="_2-var、let、const-的区别"><a href="#_2-var、let、const-的区别" class="header-anchor">#</a> 2. var、let、const 的区别</h3> <p>ES6 之前创建变量用的是 var，ES6 之后创建变量用的是 let、const。</p> <table><thead><tr><th style="text-align:center;">声明方式</th> <th>变量提升</th> <th>暂时性死区</th> <th>声明、使用顺序 / 重复声明</th> <th>块作用域有效</th> <th>跨块、跨函数访问</th></tr></thead> <tbody><tr><td style="text-align:center;">var</td> <td>会</td> <td>不存在</td> <td>允许先使用后声明 / 允许</td> <td>不是</td> <td>可以/不能</td></tr> <tr><td style="text-align:center;">let</td> <td>不会</td> <td>存在</td> <td>先声明后使用 / 不允许</td> <td>是</td> <td>不能</td></tr> <tr><td style="text-align:center;">const</td> <td>不会</td> <td>存在</td> <td>必须设置初始值，先声明后使用 / 不允许</td> <td>是</td> <td>不能</td></tr></tbody></table> <p>let 产生暂时性死区：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 暂时性死区是浏览器的 bug：检测一个未被声明的变量类型时，不会报错，会返回 undefined</span>

如：console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> a<span class="token punctuation">)</span>  <span class="token comment">// undefined</span>
而：console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> a<span class="token punctuation">)</span>  <span class="token comment">// 未声明之前不能使用</span>
<span class="token keyword">let</span> a
</code></pre></div><h2 id="十四、面向对象及其特点"><a href="#十四、面向对象及其特点" class="header-anchor">#</a> 十四、面向对象及其特点</h2> <p>面向对象是一种思想，是基于面向过程而言的，就是说面向对象是将功能等通过对象来实现，将功能封装进对象之中，让对象去实现具体的细节；这种思想是将数据作为第一位，这是对数据一种优化，操作起来更加的方便，简化了过程。Js 本身是没有 class 类型的，但是每个函数都有一个 prototype 属性，prototype 指向一个对象，当函数作为构造函数时，prototype 就起到类似于 class 的作用。</p> <p>面向对象有三个特点：</p> <ul><li>封装（隐藏对象的属性和实现细节，对外提供公 共访问方式）</li> <li>继承（提高代码复用性，继承是多态的前提）</li> <li>多态（是父类或接口定义的引用变量可以指向子类或具体实现类的实例对象）</li></ul> <h2 id="十五、js-中常见的内存泄漏"><a href="#十五、js-中常见的内存泄漏" class="header-anchor">#</a> 十五、Js 中常见的内存泄漏</h2> <p>1.意外的全局变量<br>
2.被遗忘的计时器或回调函数<br>
3.脱离 DOM 的引用<br>
4.闭包</p> <h2 id="十六、js-的语言特性"><a href="#十六、js-的语言特性" class="header-anchor">#</a> 十六、JS 的语言特性</h2> <ul><li>运行在客户端浏览器上；</li> <li>不用预编译，直接解析执行代码；</li> <li>是弱类型语言，较为灵活；</li> <li>与操作系统无关，跨平台的语言；</li> <li>脚本语言、解释性语言</li></ul> <h2 id="十七、js-的垃圾回收机制"><a href="#十七、js-的垃圾回收机制" class="header-anchor">#</a> 十七、JS 的垃圾回收机制</h2> <h3 id="_1-垃圾回收机制"><a href="#_1-垃圾回收机制" class="header-anchor">#</a> 1.垃圾回收机制</h3> <p>垃圾回收机制称 Garbage Collection 简称 GC。js 的垃圾回收机制就是定时回收闲置资源的一种机制，每隔一段时间，执行环境都会清理内存中一些没用的变量释放它所占用的内存。</p> <p><strong>核心思想：找到没用的变量，释放它们的内存。</strong></p> <h3 id="_2-回收策略"><a href="#_2-回收策略" class="header-anchor">#</a> 2.回收策略</h3> <p><strong>（1）标记清除：</strong><br>
标记清除是现在最常使用的垃圾回收策略, 使用标记清除作为垃圾回收机制的浏览器会在垃圾回收程序进行时会做如下几步 :</p> <ul><li>标记内存中所有的变量。</li> <li>把在上下文（全局作用域，脚本作用域）中声明的变量，以及在全局被引用的变量的标记删除掉，剩下的所有带标记的变量就被视为要删除的变量，垃圾回收执行时释放它们占用的内存。</li> <li>内存清理，清除垃圾。</li></ul> <p>实例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 变量 color，dog 在全局环境下声明，不会被清除</span>
<span class="token keyword">const</span> color <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> dog <span class="token operator">=</span> <span class="token string">'金毛'</span><span class="token punctuation">;</span>
<span class="token punctuation">{</span>
  <span class="token keyword">let</span> cat <span class="token operator">=</span> <span class="token string">'kitty'</span><span class="token punctuation">;</span> <span class="token comment">// 变量 cat 在块作用域中声明，且没有被全局所引用，所以会在下一次垃圾回收执行时，释放其内存</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>（2）引用计数：</strong><br>
引用计数是一种不常用的垃圾回收策略，主要核心思路就是记录值被引用的次数，一个值被赋给变量，引用次数+1，这个变量在某个时刻重新赋了一个新值，旧值的引用次数 -1 变为了0，在下次垃圾回收程序进行时就会释放它的内存。</p> <p><strong>引用计数存在的问题：循环引用。</strong></p> <p>实例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> obj1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
  <span class="token comment">// new Object 在堆内存中创建了一个对象1 {} 这个值被赋值给obj1 于是引用次数 + 1</span>
  <span class="token keyword">const</span> obj2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
  <span class="token comment">// new Object 在堆内存中创建了一个对象2 {} 这个值被赋值给obj2 于是引用次数 + 1</span>

  obj1<span class="token punctuation">.</span>a <span class="token operator">=</span> obj2<span class="token punctuation">;</span> <span class="token comment">// obj2 被赋值给 obj1的a属性  于是对象1的引用次数 1+1 = 2</span>
  obj2<span class="token punctuation">.</span>a <span class="token operator">=</span> obj1<span class="token punctuation">;</span> <span class="token comment">// obj1 被赋值给 obj2的a属性  于是对象2的引用次数 1+1 = 2</span>
<span class="token punctuation">}</span>
<span class="token comment">// 此时两个对象之间相互引用，如函数多次调用，又会重新执行多次函数体，又会多了n个相互引用的对象占用内存</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>obj1<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> 
obj2<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> 
<span class="token comment">//  通过设置为 null 可以切断两者之间的引用，在下次回收时就会清理释放掉</span>
</code></pre></div><h2 id="十八、js-的-4-种设计模式"><a href="#十八、js-的-4-种设计模式" class="header-anchor">#</a> 十八、JS 的 4 种设计模式</h2> <h3 id="_1-发布者订阅模式"><a href="#_1-发布者订阅模式" class="header-anchor">#</a> 1. 发布者订阅模式</h3> <p>就例如我们关注了某个公众号，然后他对应的有新的消息就会给我们推送。
代码实现逻辑是用数组存贮订阅者，发布者回调函数里面通知的方式是遍历订阅者数组，并将发布者内容传入订阅者数组</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//发布者与订阅模式:</span>
<span class="token keyword">var</span> shoeObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>   <span class="token comment">// 定义发布者</span>
shoeObj<span class="token punctuation">.</span>list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// 缓存列表 存放订阅者回调函数</span>

<span class="token comment">// 增加订阅者:</span>
shoeObj<span class="token punctuation">.</span><span class="token function-variable function">listen</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    shoeObj<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 订阅消息添加到缓存列表</span>
<span class="token punctuation">}</span>

<span class="token comment">// 发布消息:</span>
shoeObj<span class="token punctuation">.</span><span class="token function-variable function">trigger</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> fn<span class="token punctuation">;</span> fn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//第一个参数只是改变fn的this,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
 <span class="token comment">// 小红订阅如下消息:</span>
shoeObj<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">color<span class="token punctuation">,</span> size</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;颜色是：&quot;</span> <span class="token operator">+</span> color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;尺码是：&quot;</span> <span class="token operator">+</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 小花订阅如下消息:</span>
shoeObj<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">color<span class="token punctuation">,</span> size</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;再次打印颜色是：&quot;</span> <span class="token operator">+</span> color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;再次打印尺码是：&quot;</span> <span class="token operator">+</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
shoeObj<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">&quot;红色&quot;</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
shoeObj<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">&quot;黑色&quot;</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
</code></pre></div><h3 id="_2-工厂模式"><a href="#_2-工厂模式" class="header-anchor">#</a> 2. 工厂模式</h3> <p>简单的工厂模式可以理解为解决多个相似的问题。</p> <h3 id="_3-单例模式"><a href="#_3-单例模式" class="header-anchor">#</a> 3. 单例模式</h3> <p>只能被实例化(构造函数给实例添加属性与方法)一次。</p> <h3 id="_4-沙箱模式"><a href="#_4-沙箱模式" class="header-anchor">#</a> 4. 沙箱模式</h3> <p>将一些函数放到自执行函数里面，但要用闭包暴露接口，用变量接收暴露的接口，再调用里面的值，否则无法使用里面的值。</p> <h2 id="十九、同源策略、跨域"><a href="#十九、同源策略、跨域" class="header-anchor">#</a> 十九、同源策略、跨域</h2> <h3 id="_1-同源策略"><a href="#_1-同源策略" class="header-anchor">#</a> 1. 同源策略：</h3> <p>是浏览器对 JavaScript 实施的安全限制，只要协议、域名、端口有任何一个不同，都被当作是不同的域。</p> <h3 id="_2-跨域"><a href="#_2-跨域" class="header-anchor">#</a> 2. 跨域：</h3> <p>是指浏览器不能执行其他网站的脚本，它是由浏览器的同源策略造成的。</p> <h3 id="_3-解决跨域问题"><a href="#_3-解决跨域问题" class="header-anchor">#</a> 3. 解决跨域问题：</h3> <ol><li>Jsonp实现跨域：<br>
jsonp的原理：动态创建 script 标签，它的 src 属性是没有跨域限制的。</li></ol> <ul><li>前端创建 script 标签，设置 src，添加到 head 中（你可以往 body 中添加）</li> <li>后台返回一个 js 变量 jsonp，这个 jsonp 就是请求后的 JSON 数据</li> <li>回调完成后删除 script 标签（还有一些清理工作如避免部分浏览器内存泄露等）</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
    <span class="token keyword">function</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">addScriptTag</span><span class="token punctuation">(</span><span class="token parameter">src</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        script<span class="token punctuation">.</span>src <span class="token operator">=</span> src<span class="token punctuation">;</span>
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">addScriptTag</span><span class="token punctuation">(</span><span class="token string">&quot;http://www.foo.com/js/outer.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><ol start="2"><li>代理的方式：</li></ol> <p>服务器 A 的 test01.html 页面想访问服务器 B 的后台 action，返回“test”字符串，此时就出现跨域请求，浏览器控制台会出现报错提示，（由于跨域是浏览器的同源策略造成的，对于服务器后台不存在该问题），可以在服务器 A 中添加一个代理 action，在该 action 中完成对服务器 B 中 action 数据的请求，然后在返回到 test01.html 页面。</p> <p>开发时：用 proxy（代理的意思）。<br>
部署时：用 nginx。</p> <ol start="3"><li>CORS<br>
CORS 是一个 W3C 标准，全称是&quot;跨域资源共享&quot;（Cross-origin resource sharing）。它允许浏览器向跨源(协议 + 域名 + 端口)服务器，发出 XMLHttpRequest 请求，从而克服了 AJAX 只能同源使用的限制。</li></ol> <p>浏览器将 CORS 请求分成两类：简单请求（simple request）和非简单请求（not-so-simple request）。</p> <ul><li>浏览器发出 CORS 简单请求：只需要在头信息之中增加一个 Origin 字段。</li> <li>浏览器发出 CORS 非简单请求：会在正式通信之前，增加一次 HTTP 查询请求，称为&quot;预检&quot;请求（preflight）。浏览器先询问服务器，当前网页所在的域名是否在服务器的许可名单之中，以及可以使用哪些 HTTP 动词和头信息字段。只有得到肯定答复，浏览器才会发出正式的 XMLHttpRequest 请求，否则就报错。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">&gt;=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token operator">||</span> xhr<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">304</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                result<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;Request was unsuccessful: &quot;</span> <span class="token operator">+</span> xhr<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>    
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;https://www.webhuochai.com/test/iecors.php&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4-img、iframe、script-来发送跨域请求的优缺点"><a href="#_4-img、iframe、script-来发送跨域请求的优缺点" class="header-anchor">#</a> 4. img、iframe、script 来发送跨域请求的优缺点</h3> <ul><li><p>iframe
优点：跨域完毕之后 DOM 操作和互相之间的 JavaScript 调用都是没有问题的。<br>
缺点：<br>
1.若结果要以 URL 参数传递，这就意味着在结果数据量很大的时候需要分割传递，巨烦。<br>
2.还有一个是 iframe 本身带来的，母页面和 iframe 本身的交互本身就有安全性限制。</p></li> <li><p>script
优点：可以直接返回 json 格式的数据，方便处理。<br>
缺点：只接受 GET 请求方式。</p></li> <li><p>图片 ping
优点：可以访问任何 url，一般用来进行点击追踪，做页面分析常用的方法。<br>
缺点：不能访问响应文本，只能监听是否响应</p></li></ul> <h2 id="二十、函数柯里化"><a href="#二十、函数柯里化" class="header-anchor">#</a> 二十、函数柯里化</h2> <p>简单来说，就是返回结果是函数的函数称为函数柯里化。</p> <p>指的是将能够接收多个参数的函数转化为接收单一参数的函数，并且返回接收余下参数且返回结果的新函数的技术。</p> <p>函数柯里化的主要作用和特点就是参数复用、提前返回和延迟执行。</p> <p>在一个函数中，首先填充几个参数，然后再返回一个新的函数的技术，称为函数的柯里化。<br>
通常可用于在不侵入函数的前提下，为函数预置通用参数，供多次重复调用。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> x <span class="token operator">+</span> y
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> add1 <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token function">add1</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">3</span>
<span class="token function">add1</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">21</span>
</code></pre></div><h2 id="二十一、事件循环-event-loop"><a href="#二十一、事件循环-event-loop" class="header-anchor">#</a> 二十一、事件循环 (Event loop)</h2> <h3 id="_1-执行过程"><a href="#_1-执行过程" class="header-anchor">#</a> 1. 执行过程：</h3> <p>同步任务和异步任务分别进入不同的执行&quot;场所&quot;；<br> <strong>同步任务</strong>进入<strong>主线程</strong>形成一个<strong>执行栈</strong>(execution context stack)<br> <strong>异步任务</strong>进入 <strong>注册站</strong>（Event Table）并<strong>注册回调函数</strong>。<br>
当指定的事情完成 (如 Ajax 请求响应返回，setTimeout 延迟到指定时间) 时，注册站（Event Table）会将这个函数移入任务队列(task quene)，等待主线程的任务执行完毕；<br>
当栈中的代码执行完毕，任务为空时，主线程会<strong>先</strong>检查micro-task(<strong>微任务</strong>)队列中是否有任务，如果有，就将micro-task(微任务)队列中的所有任务依次执行，直到micro-task(微任务)队列为空；<br> <strong>之后</strong>再检查macro-task(<strong>宏任务</strong>)队列中是否有任务，如果有，则取出第一个macro-task(宏任务)加入到执行栈中，之后再清空执行栈，检查micro-task(微任务)，以此循环，直到全部的任务都执行完成。<br>
如此循环，就形成 js 的事件循环机制(Event Loop)。</p> <p><img src="%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E6%9C%BA%E5%88%B6.png" alt="事件循环机制"></p> <p>例题：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 现在我有一个网络请求，需要从服务器获取一个数据：</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 向 http://example.com 网址发送了一个网络请求</span>
<span class="token function">axios</span><span class="token punctuation">(</span><span class="token string">'http://example.com'</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">// res 是服务器返回的内容</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 如果没有事件循环，分析一下上面的代码的执行结果：   </span>
<span class="token comment">// 首先执行第一行，打印 1，再执行第二个函数（axios），</span>
<span class="token comment">// 并等待结果，服务器给我们返回结果以后，</span>
<span class="token comment">// 打印返回的结果 res，最后打印 3（浏览器不是这样执行的）。</span>
<span class="token comment">// 如果服务器访问速度很慢，执行到第二行，浏览器会处于一直等待状态，</span>
<span class="token comment">// 这时候用户点击一个网页上的点击按钮，这个操作等到服务器返回数据之后执行。</span>
<span class="token comment">// 这种用户体验是很差，所以就有了 javascript 的事件循环机制。</span>

<span class="token comment">// 打印顺序是：1、3、res</span>
</code></pre></div><h3 id="_2-组成部分"><a href="#_2-组成部分" class="header-anchor">#</a> 2. 组成部分：</h3> <ul><li>执行栈（Call Stack）</li> <li>消息队列 (Message Queue)</li></ul> <h4 id="_1-执行栈-call-stack"><a href="#_1-执行栈-call-stack" class="header-anchor">#</a> (1) 执行栈（Call Stack）</h4> <p>普通函数执行时先放入调用栈中按顺序执行并立即释放。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;22&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;11&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;33&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 打印顺序是：11 22 33</span>
</code></pre></div><h4 id="_2-消息队列-message-queue-又称任务队列"><a href="#_2-消息队列-message-queue-又称任务队列" class="header-anchor">#</a> (2) 消息队列（Message Queue）又称任务队列：</h4> <p>事件放入消息队列中，任务队列分为: macro-task(宏任务)队列，micro-task(微任务)队列，执行完执行栈中的任务后执行消息队列中的任务。</p> <p><img src="%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97.png" alt="消息队列"></p> <table><thead><tr><th style="text-align:center;">宏任务(macro-task)</th> <th style="text-align:center;">微任务(micro-task)</th></tr></thead> <tbody><tr><td style="text-align:center;">script(整体代码)</td> <td style="text-align:center;">process.nextTick</td></tr> <tr><td style="text-align:center;">setTimeout</td> <td style="text-align:center;">Promise</td></tr> <tr><td style="text-align:center;">setInterval</td> <td style="text-align:center;">Async/Await(实际就是 promise)</td></tr> <tr><td style="text-align:center;">setImmediate</td> <td style="text-align:center;">MutationObserver(html5 新特性)</td></tr> <tr><td style="text-align:center;">UI render</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">I/O (比如 Ajax 操作从网络读取数据)</td> <td style="text-align:center;"></td></tr></tbody></table> <p>再看下面的例子：</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;00&quot;</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;22&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;11&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// 分析一下上面的代码的执行结果：   </span>
<span class="token comment">// 首先遇到普通函数立即执行，所以打印 “00”。   </span>
<span class="token comment">// 遇到 setTimeout 放入消息队列中，往下执行。   </span>
<span class="token comment">// 然后打印 “11”，清空执行栈。   </span>
<span class="token comment">// 最后运行消息队列中的任务，打印“22”。</span>

<span class="token comment">// 打印顺序是：00 11 22</span>
</code></pre></div><h2 id="二十二、回流和重绘"><a href="#二十二、回流和重绘" class="header-anchor">#</a> 二十二、回流和重绘</h2> <h3 id="_1-回流和重绘"><a href="#_1-回流和重绘" class="header-anchor">#</a> 1. 回流和重绘</h3> <p>（1）回流(Reflow)：(又称重排)引起 DOM 树结构变化，改变页面布局的过程。</p> <p>（2）重绘(Repaint)：不影响页面布局，只跟样式有关的元素进行重新绘制的过程。</p> <p>! 注意：回流必引起重绘，而重绘不一定会引起回流。</p> <h3 id="_2-减少回流和重绘的方法"><a href="#_2-减少回流和重绘的方法" class="header-anchor">#</a> 2. 减少回流和重绘的方法</h3> <p>（1）CSS 中避免回流和重绘：</p> <p>尽量在 DOM 树的最末端改变 class
避免设置多层内联样式
动画效果应用到 position 设置为 absolute 或者 fixed 的元素上
避免使用 table 布局
使用 CSS3 硬件加速，可以让 transform、opacity、filters 等动画不会引起重绘</p> <p>（2）JS 避免回流和重绘：</p> <p>避免使用 JS 一个样式修改完接着下一个样式，最好一次性更改 CSS 样式，或者将样式定义好 class
避免频繁操作 DOM，使用文档片段创建子树，然后再拷贝到文档中
先隐藏元素，进行修改后再显示该元素，因为 display:none 上的DOM操作不会引起回流和重绘
避免循环读取 offsetleft 等属性，在循环之前把他们存起来
对于复杂的动画效果，使用绝对定位让其脱离文档流，否则会引起父元素及后续元素大量回流</p> <h3 id="_3-vue-的-v-if-与-v-show-区别"><a href="#_3-vue-的-v-if-与-v-show-区别" class="header-anchor">#</a> 3. Vue 的 v-if 与 v-show 区别</h3> <p>（1）v-if：是通过控制 DOM 节点的存在与否来控制元素的显隐。</p> <p>（2）v-show：是通过设置 DOM 元素的 display 样式，block为显示，none 为隐藏。</p> <p>如需要频繁切换建议使用 v-show，如在运行时条件很少改变，则用 v-if。</p> <h2 id="二十三、事件流"><a href="#二十三、事件流" class="header-anchor">#</a> 二十三、事件流</h2> <p>事件流：事件流描述的是从页面中接收事件的顺序，DOM2 级事件流包括下面几个阶段：</p> <ul><li>事件捕获阶段</li> <li>处于目标阶段</li> <li>事件冒泡阶段</li></ul> <p>addEventListener：addEventListener 是 DOM2 级事件新增的指定事件处理程序的操作，<br>
这个方法接收 3 个参数：要处理的事件名、作为事件处理程序的函数和一个布尔值。<br>
最后这个布尔值参数如果是 true，表示在捕获阶段调用事件处理程序；<br>
如果是 false，表示在冒泡阶段调用事件处理程序。</p> <p>IE 只支持事件冒泡。</p> <h2 id="二十四、事件委托、事件源"><a href="#二十四、事件委托、事件源" class="header-anchor">#</a> 二十四、事件委托、事件源</h2> <p>事件委托：不在事件的发生地（直接 dom）上设置监听函数，而是在其父元素上设置监听函数，<br>
通过事件冒泡，父元素可以监听到子元素上事件的触发，通过判断事件发生元素 DOM 的类型，<br>
来做出不同的响应。</p> <p>举例：最经典的就是 ul 和 li 标签的事件监听，比如我们在添加事件时候，采用事件委托机制，不会在 li 标签上直接添加，而是在 ul 父元素上添加。</p> <p>好处：比较合适动态元素的绑定，新添加的子元素也会有监听函数，也可以有事件触发机制。</p> <p>Event.target 谁调用谁就是事件源。</p> <h2 id="二十五、事件冒泡"><a href="#二十五、事件冒泡" class="header-anchor">#</a> 二十五、事件冒泡</h2> <p>一个事件触发后，会在子元素和父元素之间传播，这种传播分为三个阶段：</p> <ul><li>捕获阶段：（从 window 对象传导到目标节点（从外到里），这个阶段不会响应任何事件）。</li> <li>目标阶段：（在目标节点上触发）。</li> <li>冒泡阶段：（从目标节点传导回 window 对象（从里到外））。</li></ul> <p>事件委托/事件代理就是利用事件冒泡的机制把里层需要响应的事件绑定到外层。</p> <h2 id="二十六、cookie、sessionstorage、localstorage-的区别"><a href="#二十六、cookie、sessionstorage、localstorage-的区别" class="header-anchor">#</a> 二十六、Cookie、sessionStorage、localStorage 的区别</h2> <p>共同点：都是保存在浏览器端。</p> <p>不同点：</p> <ul><li><p>localStorage：它<strong>不会自动把数据发给服务器，仅在本地保存</strong>，它在所有<strong>同源窗口中都是共享</strong>的。<br>
（key：即使窗口或者浏览器关闭与否都会<strong>始终生效</strong>，因此用作持久保存数据）</p></li> <li><p>Cookie：它始终在 <strong>http 请求中自身携带</strong>（即使不需要），它在<strong>浏览器和服务器间来回传递</strong>。它在所有<strong>同源窗口中都是共享</strong>的。<br>
（key：即使窗口或浏览器关闭，设置的 cookie <strong>时间过期之前一直有效</strong>，<strong>存储容量只有 4K</strong> 左右）</p></li> <li><p>sessionStorage：它<strong>不会自动把数据发给服务器，仅在本地保存</strong>。<br>
（key：在当前浏览器窗口<strong>关闭前有效</strong>，自然也就不可能持久保存）</p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/interview/03-CSS面试题.html" class="prev">
        CSS 面试题
      </a></span> <span class="next"><a href="/interview/05-Vue面试题.html">
        Vue 面试题
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8bc50557.js" defer></script><script src="/assets/js/2.9b5c8eec.js" defer></script><script src="/assets/js/14.8803238b.js" defer></script>
  </body>
</html>
